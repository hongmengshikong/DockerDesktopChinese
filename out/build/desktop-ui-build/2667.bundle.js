(globalThis.webpackChunk_docker_desktop_ui=globalThis.webpackChunk_docker_desktop_ui||[]).push([[2667],{59748:(e,t,n)=>{"use strict";var i=n(64836);t.Z=void 0;var a=i(n(64938)),s=n(85893),r=(0,a.default)([(0,s.jsx)("path",{d:"M12 5.99 19.53 19H4.47L12 5.99M12 2 1 21h22L12 2z"},"0"),(0,s.jsx)("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")],"WarningAmber");t.Z=r},82667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Component:()=>Et,GlobalSearchScreen:()=>Et});var i=n(67294),a=n(47966),s=n(838),r=n(99226),l=n(69397),o=n(75316),c=n(37672),d=n(3514),m=n(42829),u=n(64506),x=n(92488),g=n(75485),h=n(53101),p=n(3402),f=n(81798),C=n(37310),j=n(53497),k=n(8413),b=n(11777),w=n(11104),v=n(23972),y=n(96913),Z=n(19367),S=n(29643),I=n(85893),R=n(21023),T=n(69053),E=n(53276),D=n(26447);function N({header:e,children:t,onDetailCardBodyScroll:n}){return(0,I.jsxs)(D.Z,{direction:"column",sx:{height:"100%",width:"100%"},children:[(0,I.jsx)(r.Z,{sx:e=>({display:"flex",alignItems:"center",padding:e.spacing(2),position:"relative",backgroundColor:"light"===e.palette.mode?e.palette.docker.grey[100]:"#000000"}),children:e}),(0,I.jsx)(r.Z,{onScroll:n,sx:e=>({flexGrow:1,display:"flex",alignItems:"stretch",overflowY:"auto",padding:e.spacing(2),backgroundColor:"light"===e.palette.mode?"#FFFFFF":e.palette.docker.grey[100]}),children:(0,I.jsx)(r.Z,{sx:{width:"100%"},children:t})})]})}var L=n(67720),W=n(6837);function B({containers:e,emptyListText:t,onContainerStopClick:n,onContainerStartClick:a,onContainerRemoveClick:s,onContainerPauseClick:l,onContainerRestartClick:o,onContainerTerminalClick:c,onContainerViewFilesClick:d,onContainerViewDetailsClick:m,onContainerOpenBrowserClick:u,onContainerGenerateRunClick:x}){return 0===e.length?(0,I.jsx)(r.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,I.jsx)(v.Z,{variant:"body1",sx:{fontWeight:600},children:t})}):(0,I.jsx)(r.Z,{sx:{rowGap:1,columnGap:2,display:"grid",gridTemplateColumns:"24px 1fr auto auto"},children:e.map(((t,g)=>(0,I.jsxs)(i.Fragment,{children:[(0,I.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,I.jsx)(Z.U,{state:t.state.status})}),(0,I.jsxs)(r.Z,{sx:{display:"grid",gridTemplateRows:"1fr 1fr",alignItems:"center"},children:[(0,I.jsx)(v.Z,{variant:"body1",sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:600},children:t.name}),(0,I.jsx)(v.Z,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:t.imageName})]}),(0,I.jsxs)(v.Z,{variant:"body1",sx:{fontWeight:400,textAlign:"right",alignSelf:"center",textTransform:"capitalize"},children:[t.state.status,"exited"===t.state.status&&` (${t.state.exitCode})`]}),(0,I.jsx)(r.Z,{sx:{alignSelf:"center",justifySelf:"self-end"},children:(0,I.jsx)(W.K,{container:t,onContainerStopClick:n,onContainerStartClick:a,onContainerRemoveClick:s,onContainerPauseClick:l,onContainerRestartClick:o,onContainerTerminalClick:c,onContainerViewFilesClick:d,onContainerViewDetailsClick:m,onContainerOpenBrowserClick:u,onContainerGenerateRunClick:x})}),g<e.length-1&&(0,I.jsx)(L.Z,{variant:"fullWidth",sx:{gridColumn:"span 4"}})]},t.id)))})}function A({item:e}){return(0,I.jsxs)(r.Z,{sx:{display:"grid",gridTemplateColumns:"32px 1fr auto",gridTemplateRows:"2fr 1fr",columnGap:1,width:"100%",height:"100%"},children:[(0,I.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,I.jsx)(y.k,{state:e.state.status})}),(0,I.jsxs)(r.Z,{sx:{display:"grid",gridTemplateRows:"1fr 1fr",overflow:"hidden",alignItems:"center"},children:[(0,I.jsx)(v.Z,{variant:"body1",component:"p",sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:600},children:(0,I.jsx)(R.Z,{title:e.name,children:(0,I.jsx)("span",{children:e.name})})}),(0,I.jsxs)(v.Z,{children:[e.containers.length," container(s)"]})]}),(0,I.jsx)(E.p,{item:e,analyticsContext:w.qR.Screen}),(0,I.jsx)(v.Z,{component:"p",sx:{gridColumn:"span 2",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:(0,I.jsx)(R.Z,{title:e.labels["com.docker.compose.project.working_dir"]||"",children:(0,I.jsx)("span",{children:e.labels["com.docker.compose.project.working_dir"]})})}),(0,I.jsx)(v.Z,{sx:{alignSelf:"center",justifySelf:"self-end",textTransform:"capitalize"},children:(0,T.r)(e)})]})}function _({item:e}){const{trackGlobalSearchEvent:t}=(0,w.Tm)(w.qR.Screen);return(0,I.jsx)(N,{header:(0,I.jsx)(A,{item:e}),children:(0,I.jsx)(B,{containers:e.containers,emptyListText:"No containers.",onContainerOpenBrowserClick:()=>t(w.bk.ComposeContainerOpenBrowserButtonClicked),onContainerPauseClick:()=>t(w.bk.ComposeContainerPauseButtonClicked),onContainerRemoveClick:()=>t(w.bk.ComposeContainerRemoveButtonClicked),onContainerRestartClick:()=>t(w.bk.ComposeContainerRestartButtonClicked),onContainerStartClick:()=>t(w.bk.ComposeContainerStartButtonClicked),onContainerStopClick:()=>t(w.bk.ComposeContainerStopButtonClicked),onContainerTerminalClick:()=>t(w.bk.ComposeContainerTerminalButtonClicked),onContainerViewFilesClick:()=>t(w.bk.ComposeContainerViewFilesButtonClicked),onContainerViewDetailsClick:()=>t(w.bk.ComposeContainerViewDetailsButtonClicked),onContainerGenerateRunClick:()=>t(w.bk.ComposeContainerGenerateRunButtonClicked)})})}var F=n(48403),O=n.n(F),$=n(81230),P=n(28571),G=n(3294);function U({item:e}){return(0,I.jsxs)(r.Z,{sx:{gap:1,width:"100%",height:"100%",display:"grid",gridTemplateColumns:"1fr auto"},children:[(0,I.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,I.jsx)(Z.U,{state:e.state.status}),(0,I.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,I.jsx)(v.Z,{variant:"body1",sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,I.jsx)(R.Z,{title:e.name,children:(0,I.jsx)("span",{children:e.name})})}),(0,I.jsx)(v.Z,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,I.jsx)(R.Z,{title:e.image,children:(0,I.jsx)("span",{children:e.image})})})]})]}),(0,I.jsx)(G.d,{item:e,analyticsContext:w.qR.Screen}),(0,I.jsx)(r.Z,{children:(0,I.jsx)($.y,{container:e,limit:3,direction:"row"})}),(0,I.jsxs)(v.Z,{sx:{alignSelf:"center",justifySelf:"self-end"},children:[O()(e.state.status),"running"===e.state.status&&e.state.startedAt&&` (${(0,P.N)(e.state.startedAt)})`,"exited"===e.state.status&&` (${e.state.exitCode})`]})]})}function z({item:e}){const{mounts:t,environment:n}=e;return(0,I.jsx)(N,{header:(0,I.jsx)(U,{item:e}),children:(t.length>0||n.length>0)&&(0,I.jsxs)(r.Z,{sx:{gap:1,display:"grid",gridTemplateColumns:"30% 1fr"},children:[(0,I.jsx)(v.Z,{variant:"body1",sx:{fontWeight:600},children:"Command"}),(0,I.jsx)(v.Z,{sx:{wordBreak:"break-all"},children:e.command}),(n.length>0||t.length>0)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(r.Z,{sx:{gridColumn:"span 2"}}),(0,I.jsx)(L.Z,{variant:"fullWidth",sx:{gridColumn:"span 2"}}),(0,I.jsx)(r.Z,{sx:{gridColumn:"span 2"}})]}),t.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.Z,{variant:"body1",sx:{gridColumn:"span 2",fontWeight:600},children:"Mounts"}),e.mounts.map((({source:e,destination:t})=>(0,I.jsxs)(i.Fragment,{children:[(0,I.jsx)(v.Z,{sx:{wordBreak:"break-all"},children:t}),(0,I.jsx)(v.Z,{sx:{wordBreak:"break-all"},children:e}),(0,I.jsx)(L.Z,{variant:"fullWidth",sx:{gridColumn:"span 2"}})]},`${e}-${t}`)))]}),n.length>0&&t.length>0&&(0,I.jsx)(r.Z,{sx:{gridColumn:"span 2",gridRow:"span 2"}}),n.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.Z,{variant:"body1",sx:{gridColumn:"span 2",fontWeight:600},children:"Environment Variables"}),n.map((({key:e,value:t},a)=>(0,I.jsxs)(i.Fragment,{children:[(0,I.jsx)(v.Z,{sx:{wordBreak:"break-all"},children:e}),(0,I.jsx)(v.Z,{sx:{wordBreak:"break-all"},children:t}),a!==n.length-1&&(0,I.jsx)(L.Z,{variant:"fullWidth",sx:{gridColumn:"span 2"}})]},e)))]})]})})}var H=n(54048),V=n(50062),q=n(79722),M=n(62983),K=n(52686),Q=n(20853),X=n(45492),Y=n(49813),J=n(56280),ee=n(14723),te=n(18843),ne=n(29861),ie=n(77946),ae=n(89169),se=n(36833),re=n(9635),le=n(19527),oe=n(4811);function ce({item:e}){const{trackGlobalSearchEvent:t}=(0,w.Tm)(w.qR.Screen),[n,a]=(0,i.useState)(!1),[s,l]=(0,i.useState)(null),o=e.image.split(":")[1],c=void 0!==e.created?new Date(e.created):null,d=c?(0,ie.Z)(c,new Date,{addSuffix:!0}):"";return(0,I.jsxs)(I.Fragment,{children:[s&&(0,I.jsx)(le.i,{extension:s,open:n,onClose:()=>a(!1)}),(0,I.jsxs)(r.Z,{sx:{width:"100%",display:"flex",alignItems:"center",gap:e=>e.spacing(1)},children:[(0,I.jsx)(K.I,{name:e.name,icon:e.icon,provider:e.provider}),(0,I.jsxs)(r.Z,{children:[(0,I.jsxs)(v.Z,{variant:"body1",sx:{width:"auto",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:600},children:[e.name,e.isFeatured?(0,I.jsx)(ee.Z,{label:"Featured",sx:{ml:1,color:e=>e.palette.docker.violet[500],backgroundColor:"transparent"}}):null,e.isRecommended?(0,I.jsx)(ee.Z,{label:"Recommended",sx:{ml:1,color:e=>e.palette.docker.green[500],backgroundColor:"transparent"}}):null]}),(0,I.jsx)(M.T,{publisher:e.provider,publisherBadge:e.publisherBadge})]})]}),(0,I.jsxs)(D.Z,{direction:"column",sx:{width:"100%",marginTop:"auto"},children:[(0,I.jsx)(r.Z,{sx:{width:"100%",display:"flex",alignItems:"center",gap:e=>e.spacing(1)},children:(0,I.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",marginLeft:"auto",gap:1},children:(0,I.jsx)(ae.k,{extension:e,context:e.isFeatured?"global-search-featured":"global-search",onProgress:e=>{a(!0),l(e)},onUpdate:()=>{t(w.bk.ExtensionUpdateButtonClicked,{extension:e.repository,isFeatured:e.isFeatured||e.isRecommended})},onInstall:()=>{t(w.bk.ExtensionInstallButtonClicked,{extension:e.repository,isFeatured:e.isFeatured||e.isRecommended})},onUninstall:()=>{t(w.bk.ExtensionUninstallButtonClicked,{extension:e.repository,isFeatured:e.isFeatured||e.isRecommended})}})})}),(0,I.jsxs)(r.Z,{pt:1,alignSelf:"flex-end",children:[(0,I.jsxs)(v.Z,{display:"inline",variant:"body1",children:["Updated ",d]}),(0,I.jsx)(v.Z,{display:"inline",variant:"body2",px:1,children:"•"}),(0,I.jsxs)(v.Z,{display:"inline",children:["v",o]})]})]})]})}var de=n(63441),me=n(14957),ue=n(76785),xe=n(81437),ge=n(91178);function he({item:e,isActive:t}){return(0,I.jsxs)(I.Fragment,{children:[e.image?(0,I.jsx)("img",{src:e.image,alt:e.name,width:24}):(0,I.jsx)(ue.x,{sx:{width:24,fill:({palette:e})=>e.docker.grey[500]}}),(0,I.jsx)(S.e,{underline:t,itemName:e.name,sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),(0,I.jsx)(xe.o,{type:e.filterType}),(0,I.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",marginLeft:"auto"},children:[(0,I.jsx)(de.Z,{fontSize:"small",sx:{marginRight:.25,color:({palette:e})=>t?"inherit":e.docker.grey[500]}}),(0,I.jsx)(v.Z,{variant:"body1",children:e.pullCount}),(0,I.jsx)(r.Z,{sx:{width:2,height:2,marginX:1,background:e=>e.palette.text.secondary}}),(0,I.jsx)(me.Z,{fontSize:"small",sx:{marginRight:.25,color:({palette:e})=>t?"inherit":e.docker.grey[500]}}),(0,I.jsx)(v.Z,{variant:"body1",children:(0,ge.L)(e.starCount)})]})]})}var pe=n(65434),fe=n(99846);function Ce({item:e,isActive:t}){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(pe.Z,{sx:{color:e=>e.palette.docker.grey[500]}}),(0,I.jsx)(S.e,{underline:t,itemName:`${e.name}:${e.tag}`,sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),(0,I.jsx)(v.Z,{variant:"body1",sx:{textAlign:"right",whiteSpace:"nowrap",marginLeft:"auto"},children:(0,fe.td)(e.Size)})]})}var je=n(73595);function ke({item:e,isActive:t}){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(je.Z,{sx:{color:e=>e.palette.docker.grey[500]}}),(0,I.jsx)(S.e,{underline:t,itemName:e.displayName,sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),(0,I.jsx)(v.Z,{variant:"body1",sx:{textAlign:"right",whiteSpace:"nowrap",marginLeft:"auto"},children:(0,P.N)(e.lastUpdated)})]})}var be=n(66489),we=n(98761),ve=n(887),ye=n(97844),Ze=n(83855),Se=n(72757),Ie=n(36492);var Re=n(22662),Te=n(27036),Ee=n(59748),De=n(63516),Ne=n(98396),Le=n(53640),We=n(60076),Be=n(88441),Ae=n(63931),_e=n(43106),Fe=n(2734);const Oe={headerWrapper:{width:"100%",height:"100%",display:"grid",gridTemplateRows:e=>`${e.spacing(6)} auto`},remoteImageNameAndTagsWrapper:{display:"grid",columnGap:1,gridTemplateColumns:"auto 1fr auto"},remoteImageDockerIcon:{width:32,alignSelf:"center",fill:({palette:e})=>e.docker.grey[500]},remoteImageName:{minWidth:0,overflow:"hidden",alignSelf:"center",whiteSpace:"nowrap",textOverflow:"ellipsis"},remoteImageTagsWrapper:{gap:1,display:"flex",marginLeft:"auto",alignSelf:"center",alignItems:"center"},remoteImageTagListItem:{gap:1,display:"flex",alignItems:"center"},noAvailableTagsWarning:{display:"flex",alignItems:"center",color:({palette:e})=>e.docker.amber[500]},remoteImageDetailsWrapper:{gap:1,width:"100%",display:"flex",alignItems:"center"},remoteImageDetailsIcon:{marginRight:.25,color:({palette:e})=>e.docker.grey[500]},circleSeparator:{width:2,height:2,borderRadius:"50%",background:({palette:e})=>e.text.secondary},linearProgressWrapper:{left:0,bottom:0,width:"100%",position:"absolute"}};function $e({item:e,itemDetails:t,availableTagsStatus:n,availableTags:i,selectedTag:s,isPullingSelectedTag:l,onRunTag:o,onPullTag:c,onChangeSelectedTag:d,pullingProgress:m}){const x=(0,Fe.Z)(),{trackGlobalSearchEvent:g}=(0,w.Tm)(w.qR.Screen),h=(0,Ne.Z)(x.breakpoints.down("sm")),p=(0,u.C)((({engine:e})=>e.mode)),f=e.slug.includes("/")?`https://hub.docker.com/r/${e.slug}`:`https://hub.docker.com/_/${e.slug}`;return(0,I.jsxs)(r.Z,{sx:Oe.headerWrapper,children:[(0,I.jsxs)(r.Z,{sx:Oe.remoteImageNameAndTagsWrapper,children:[e.image?(0,I.jsx)("img",{width:32,alt:e.name,src:e.image,style:{alignSelf:"center"}}):(0,I.jsx)(ue.x,{sx:Oe.remoteImageDockerIcon}),(0,I.jsx)(v.Z,{sx:Oe.remoteImageName,variant:"body1",children:(0,I.jsx)(R.Z,{title:e.name,children:(0,I.jsxs)("strong",{children:[e.name," "]})})}),(0,I.jsxs)(r.Z,{sx:Oe.remoteImageTagsWrapper,children:["loading"===n&&(0,I.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(be.Z,{size:24,sx:{mr:1}}),"Loading tags..."]}),"success"===n&&0===i.size&&(0,I.jsx)(R.Z,{title:`Docker is running ${p} containers.`,children:(0,I.jsxs)(v.Z,{variant:"body1",sx:Oe.noAvailableTagsWarning,children:[(0,I.jsx)(Ee.Z,{sx:{marginRight:.5}}),"This image isn't supported"]})}),s&&i.size>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(r.Z,{sx:{minWidth:120},children:(0,I.jsxs)(Le.Z,{fullWidth:!0,children:[(0,I.jsx)(We.Z,{size:"small",children:"Tag"}),(0,I.jsx)(_e.Z,{size:"small",label:"Tag",value:i.has(s)?s:"",onChange:e=>{d(e.target.value)},disabled:l,children:Array.from(i.entries()).map((([t,n])=>(0,I.jsx)(Ae.Z,{value:t,children:(0,I.jsxs)(r.Z,{sx:Oe.remoteImageTagListItem,children:[t,n&&(0,I.jsx)(Te.Z,{"data-testid":"global-search-hub-image-is-pulled",color:"success"})]})},`${e.name}-${t}`)))})]})}),(0,I.jsx)(De.Z,{variant:"outlined",loading:l,onClick:c,children:"Pull"}),(0,I.jsx)(De.Z,{variant:"contained",loading:l,onClick:o,children:"Run"})]})]})]}),(0,I.jsxs)(r.Z,{sx:Oe.remoteImageDetailsWrapper,children:[(0,I.jsx)(xe.o,{type:e.filterType,displayLabel:!h}),(0,I.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(de.Z,{fontSize:"small",sx:Oe.remoteImageDetailsIcon}),e.pullCount]}),(0,I.jsx)(r.Z,{sx:Oe.circleSeparator}),(0,I.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(me.Z,{fontSize:"small",sx:Oe.remoteImageDetailsIcon}),(0,ge.L)(e.starCount)]}),(0,I.jsx)(a.ExternalLink,{href:f,onClick:()=>{g(w.bk.HubImageHubLinkClicked,{image:e.name})},children:"View on Hub"}),t&&(0,I.jsxs)(v.Z,{sx:{marginLeft:"auto"},children:["Updated ",(0,P.N)(t.lastUpdated)]})]}),l&&(0,I.jsx)(r.Z,{sx:Oe.linearProgressWrapper,children:(0,I.jsx)(Be.Z,{value:m,variant:0===m?"indeterminate":"determinate"})})]})}var Pe=n(93379),Ge=n.n(Pe),Ue=n(7795),ze=n.n(Ue),He=n(90569),Ve=n.n(He),qe=n(3565),Me=n.n(qe),Ke=n(19216),Qe=n.n(Ke),Xe=n(44589),Ye=n.n(Xe),Je=n(68740),et=n.n(Je),tt={};tt.styleTagTransform=Ye(),tt.setAttributes=Me(),tt.insert=Ve().bind(null,"head"),tt.domAPI=ze(),tt.insertStyleElement=Qe(),Ge()(et(),tt),et()&&et().locals&&et().locals;const nt={imageDetailsLoading:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},imageDetailsError:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},imageDetailsWrapper:{display:"flex",height:"100%",flexDirection:"column"},imageDetailsEmpty:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},copyToClipboardIcon:{color:({palette:e})=>"dark"===e.type?e.docker.text:e.docker.grey[100]},imageCliCommandWrapper:e=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(1,2),backgroundColor:"dark"===e.palette.type?"#000000":e.palette.docker.grey[800]}),imageCliCommand:{fontFamily:"monospace",color:e=>"dark"===e.palette.type?e.palette.docker.text:e.palette.docker.grey[100]}};function it({item:e}){const t=(0,m.T)(),n=(0,g.a)(),{trackGlobalSearchEvent:s}=(0,w.Tm)(w.qR.Screen),{data:l,status:o}=(0,Re.s)(e),{data:c,status:d}=function(e){const[t,n]=(0,i.useState)();return(0,i.useEffect)((()=>{const t=window.setTimeout((()=>{n(e.name)}),500);return()=>{window.clearTimeout(t)}}),[e.name]),(0,Ie.a)({queryKey:["global-search-hub-image-details",e.name],queryFn:()=>async function(e){let t=`https://dd-docker-hub/v2/repositories/library/${e}`;if(e.includes("/")){const[n,i]=e.split("/");t=`https://dd-docker-hub/v2/repositories/${n}/${i}`}const n=await fetch(t);if(!n.ok){const e=await n.text();throw new Error(`Request failed with ${n.status} ${n.statusText} - ${e}`)}const{last_updated:i,description:a,full_description:s}=await n.json();return{lastUpdated:i,shortDescription:a,fullDescription:s}}(e.name),cacheTime:3e5,staleTime:3e5,enabled:t===e.name})}(e),x=(0,u.C)((({images:e})=>e.Images)),[h,p]=(0,i.useState)(!1),[f,C]=(0,i.useState)(null);(0,i.useEffect)((()=>{Array.isArray(l)&&C(l[0]||null)}),[l]);const j=(0,i.useRef)([]),k=(0,i.useRef)(),b=(0,u.C)((({images:t})=>{if(f)return t.pullingImages.find((({tag:t,repo:n})=>t.name===f.name&&n.name===e.name))})),y=!!b,Z=y?b.progression:0,S=(0,i.useMemo)((()=>{if("success"!==o)return new Map;const t=new Map;return l.forEach((({name:n})=>{t.set(n,x.some((t=>t.name===e.name&&t.tag===n)))})),t}),[e.name,l,o,x.length]);let R;f&&S.has(f.name)&&(R=x.find((({tag:t,name:n})=>t===f.name&&n===e.name)));const T=(0,we.t)("success"===d?c.fullDescription:"",{a:({ref:e,href:t,...n})=>(0,I.jsx)(a.ExternalLink,{...n,href:t||"",showIcon:!1,showTooltip:!1})});(0,i.useEffect)((()=>{const t=Ze.R.subscribe((t=>{const n=`${t.repository}:${t.tag}`;if(j.current.includes(n)&&["PULLING_ERRORED","PULLING_FINISHED","DOWNLOADED_NEWER_IMAGE"].includes(t.result))switch(j.current=j.current.filter((e=>e!==n)),t.result){case"PULLING_ERRORED":s(w.bk.HubImagePullTagFailed,{image:e.name,tag:t.tag||""});break;case"PULLING_FINISHED":case"DOWNLOADED_NEWER_IMAGE":s(w.bk.HubImagePullTagSucceeded,{image:e.name,tag:t.tag||""})}}));return()=>{t.unsubscribe()}}),[s,e.name]);const E=`docker ${R?"run":"pull"} ${e.name}${f&&"latest"!==f.name?`:${f.name}`:""}`,D=n=>{j.current=[...j.current,`${e.name}:${n.name}`],t(Se.n5.pullImage({repository:e.name,tag:n.name}))};return(0,I.jsxs)(N,{onDetailCardBodyScroll:()=>{window.clearTimeout(k.current),k.current=window.setTimeout((()=>{k.current=void 0,s(w.bk.HubImageDocumentationScrolled,{image:e.name})}),1e3)},header:(0,I.jsx)($e,{item:e,itemDetails:c,selectedTag:f?f.name:"",availableTags:S,availableTagsStatus:o,isPullingSelectedTag:y,onPullTag:()=>{f&&(s(w.bk.HubImagePullTagButtonClicked,{image:e.name,tag:f.name}),D(f))},onRunTag:()=>{f&&(s(w.bk.HubImageRunTagButtonClicked,{image:e.name,tag:f.name}),R||D(f),p(!0))},onChangeSelectedTag:t=>{if("success"!==o)return;const n=l.find((({name:e})=>e===t));C(n||null),s(w.bk.HubImageTagSelected,{image:e.name,tag:t})},pullingProgress:Z}),children:["success"===d&&(0,I.jsxs)(r.Z,{sx:nt.imageDetailsWrapper,children:[S.size>0&&(0,I.jsxs)(r.Z,{sx:nt.imageCliCommandWrapper,children:[(0,I.jsx)(v.Z,{sx:nt.imageCliCommand,children:E}),(0,I.jsx)(ve.y,{text:E,sx:nt.copyToClipboardIcon})]}),R&&(0,I.jsxs)(v.Z,{variant:"body2",children:["Note: Additional parameters might be required.",T&&" See full image description below to learn more."]}),c.shortDescription&&(0,I.jsx)(r.Z,{children:(0,I.jsx)(v.Z,{sx:{marginTop:1},variant:"body1",children:c.shortDescription})}),T&&(0,I.jsx)(r.Z,{className:"markdown-content",children:T}),!T&&!c.shortDescription&&(0,I.jsx)(v.Z,{variant:"body1",sx:nt.imageDetailsEmpty,children:(0,I.jsx)("strong",{children:"There's no description available for this image."})})]}),"error"===d&&(0,I.jsx)(v.Z,{variant:"body1",sx:nt.imageDetailsError,children:(0,I.jsx)("strong",{children:"An error occurred while fetching the image details"})}),"loading"===d&&(0,I.jsxs)(r.Z,{sx:nt.imageDetailsLoading,children:[(0,I.jsx)(be.Z,{sx:{marginBottom:2}}),"Loading ",e.name," details"]}),R&&h&&(0,I.jsx)(ye.t,{image:R,onClose:e=>{p(!1),e&&n(`/dashboard/containers/${e}`)}})]})}var at=n(41733),st=n(99559),rt=n(66120),lt=n(8883);function ot({item:e,containers:t,onRun:n,onDelete:i}){const{trackGlobalSearchEvent:a}=(0,w.Tm)(w.qR.Screen),s=e.Id.replace("sha256:","").slice(0,12);return(0,I.jsxs)(D.Z,{direction:"column",width:"100%",spacing:1,children:[(0,I.jsxs)(D.Z,{direction:"row",alignItems:"center",children:[(0,I.jsx)(pe.Z,{sx:{mr:1,color:e=>e.palette.docker.grey[500]}}),(0,I.jsx)(rt.h,{to:(0,lt.X)(e.id,e.name,e.tag),sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:600},children:`${e.name}:${e.tag}`}),(0,I.jsxs)(D.Z,{direction:"row",alignItems:"center",spacing:1,marginLeft:"auto",children:[(0,I.jsx)(l.Z,{variant:"contained",onClick:n,size:"small",children:"Run"}),(0,I.jsx)(l.Z,{variant:"contained",onClick:i,color:"error",size:"small",children:(0,I.jsx)(at.Z,{})})]})]}),(0,I.jsxs)(D.Z,{direction:"row",alignItems:"center",children:[(0,I.jsx)(v.Z,{sx:{fontFamily:"monospace",marginRight:1},children:s}),(0,I.jsx)(ve.y,{text:s,onClick:()=>{a(w.bk.LocalImageIdCopyButtonClicked)}}),(0,I.jsxs)(v.Z,{sx:{fontSize:13,color:e=>t.length>0?e.palette.docker.green[400]:null,display:"flex",alignItems:"center",fontWeight:t.length>0?600:null,marginLeft:1},component:"div",children:[(0,I.jsx)(r.Z,{component:"span",sx:{height:8,width:8,borderRadius:"50%",marginRight:1,backgroundColor:e=>t.length>0?e.palette.docker.green[300]:e.palette.docker.grey[300]}}),0===t.length?"Not in use":`In use (${t.length})`]}),(0,I.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",marginLeft:"auto"},children:["Created ",(0,fe.g3)(1e3*e.Created),(0,I.jsx)(r.Z,{component:"span",sx:{width:2,height:2,marginX:1,borderRadius:"50%",background:e=>e.palette.text.secondary}}),(0,fe.td)(e.Size)]})]})]})}function ct({item:e}){const t=(0,g.a)(),{trackGlobalSearchEvent:n}=(0,w.Tm)(w.qR.Screen),a=(0,u.C)((e=>e.containers.entities)).filter((({imageId:t})=>t===e.Id)),[s,r]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),c=(0,u.C)((t=>t.images.Images.find((t=>t.Id===e.Id))));return(0,I.jsxs)(N,{header:(0,I.jsx)(ot,{item:e,containers:a,onRun:()=>{r(!0),n(w.bk.LocalImageRunButtonClicked)},onDelete:()=>{o(!0),n(w.bk.LocalImageRemoveButtonClicked)}}),children:[(0,I.jsx)(B,{containers:a,emptyListText:"No container with this image.",onContainerOpenBrowserClick:()=>n(w.bk.LocalImageContainerOpenBrowserButtonClicked),onContainerPauseClick:()=>n(w.bk.LocalImageContainerPauseButtonClicked),onContainerRemoveClick:()=>n(w.bk.LocalImageContainerRemoveButtonClicked),onContainerRestartClick:()=>n(w.bk.LocalImageContainerRestartButtonClicked),onContainerStartClick:()=>n(w.bk.LocalImageContainerStartButtonClicked),onContainerStopClick:()=>n(w.bk.LocalImageContainerStopButtonClicked),onContainerTerminalClick:()=>n(w.bk.LocalImageContainerTerminalButtonClicked),onContainerViewFilesClick:()=>n(w.bk.LocalImageContainerViewFilesButtonClicked),onContainerViewDetailsClick:()=>n(w.bk.LocalImageContainerViewDetailsButtonClicked),onContainerGenerateRunClick:()=>n(w.bk.LocalImageContainerGenerateRunButtonClicked)}),c&&s&&(0,I.jsx)(ye.t,{image:c,onClose:e=>{r(!1),e&&t(`/dashboard/containers/${e}`)}}),c&&l&&(0,I.jsx)(st.A,{open:!0,onClose:()=>o(!1),action:async()=>{await desktopIpcClient.images.dockerRemoveImage("<none>"===e.tag?{id:e.id}:{name:e.name,tag:e.tag})},itemType:"image",items:[`${e.name}:${e.tag}`]})]})}var dt=n(608),mt=n(71934),ut=n(86562),xt=n(88898);var gt=n(90087),ht=n(68252);const pt={detailCardHeaderWrapper:{width:"100%",display:"flex",flexDirection:"column",rowGap:.5},detailCardHeaderSectionWrapper:{display:"flex",alignItems:"center",width:"100%"},detailCardTagsWrapper:{gap:1,display:"flex",marginLeft:"auto"},loadingWrapper:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},imageTagListItem:{gap:1,display:"flex",alignItems:"center"},imageDetailsError:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}};function ft({item:e}){const[t,n]=(0,i.useState)(""),[a,s]=(0,i.useState)(!1),l=(0,m.T)(),o=(0,i.useRef)([]),{trackGlobalSearchEvent:c}=(0,w.Tm)(w.qR.Screen),{data:d,status:x}=(0,ht.R)(e),g=(0,u.C)((({images:e})=>e.Images)),h=(0,u.C)((({images:n})=>{if(!t)return;const i=n.pullingImages.find((({tag:n,repo:i})=>n.name===t&&i.name===e.displayName));return null==i?void 0:i.progression}));(0,i.useEffect)((()=>{"success"===x&&d.length>0&&n(d[0].name)}),[d,x]);const p=(0,i.useMemo)((()=>{const t=new Map;return"success"!==x||d.forEach((({name:n})=>{t.set(n,g.find((t=>t.name===e.displayName&&t.tag===n)))})),t}),[e.displayName,g,d,x]);(0,i.useEffect)((()=>{const e=Ze.R.subscribe((e=>{const t=`${e.repository}:${e.tag}`;if(o.current.includes(t)&&["PULLING_ERRORED","PULLING_FINISHED","DOWNLOADED_NEWER_IMAGE"].includes(e.result))switch(o.current=o.current.filter((e=>e!==t)),e.result){case"PULLING_ERRORED":c(w.bk.RemoteRepositoryPullTagFailed);break;case"PULLING_FINISHED":case"DOWNLOADED_NEWER_IMAGE":c(w.bk.RemoteRepositoryPullTagSucceeded)}}));return()=>{e.unsubscribe()}}),[c,e.displayName]);const f=(0,i.useMemo)((()=>[{field:"os",headerName:"OS",sortable:!1,hideable:!1,width:50,renderCell:({row:e})=>"linux"===e.os?(0,I.jsx)("img",{alt:"linux",src:mt}):(0,I.jsx)("img",{alt:"windows",src:ut})},{field:"name",headerName:"Name",hideable:!1,sortable:!1},{field:"lastUpdated",headerName:"Last updated",hideable:!1,sortable:!1},{field:"size",headerName:"Size",hideable:!1,sortable:!1},{flex:1,sortable:!1,field:"vulnerabilities",headerName:"Vulnerabilities",renderCell:({row:t})=>(0,I.jsx)(jt,{item:e,tag:t})}]),[e.displayName]),C=p.get(t),j=()=>{t&&(o.current=[...o.current,`${e.displayName}:${t}`],l(Se.n5.pullImage({repository:e.displayName,tag:t})))};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(N,{header:(0,I.jsx)(Ct,{item:e,selectedTag:t||"",availableImageTags:p,availableImageTagsStatus:x,pullingImageProgression:h,onRunButtonClick:()=>{s(!0),C||j(),c(w.bk.RemoteRepositoryRunTagButtonClicked)},onPullButtonClick:()=>{j(),c(w.bk.RemoteRepositoryPullTagButtonClicked)},onSelectedTagChange:e=>{"success"===x&&(c(w.bk.RemoteRepositoryTagSelected),n(e))}}),children:["loading"===x&&(0,I.jsx)(r.Z,{sx:pt.loadingWrapper,children:(0,I.jsx)(be.Z,{})}),"error"===x&&(0,I.jsx)(v.Z,{variant:"body1",sx:pt.imageDetailsError,children:(0,I.jsx)("strong",{children:"An error occurred while fetching the image tags"})}),"success"===x&&(0,I.jsx)(xt.S,{children:(0,I.jsx)(dt.s,{hideFooter:!0,disableRowSelectionOnClick:!0,columns:f,rows:d})})]}),a&&C&&(0,I.jsx)(ye.t,{image:C,onClose:()=>s(!1)})]})}function Ct({item:e,availableImageTags:t,availableImageTagsStatus:n,selectedTag:i,pullingImageProgression:s,onRunButtonClick:l,onPullButtonClick:o,onSelectedTagChange:c}){const d=(0,P.N)(e.lastUpdated);return(0,I.jsxs)(r.Z,{sx:pt.detailCardHeaderWrapper,children:[(0,I.jsxs)(r.Z,{sx:pt.detailCardHeaderSectionWrapper,children:[(0,I.jsx)(v.Z,{variant:"body1",children:(0,I.jsx)("strong",{children:e.displayName})}),(0,I.jsxs)(r.Z,{sx:pt.detailCardTagsWrapper,children:["loading"===n&&(0,I.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(be.Z,{size:24,sx:{mr:1}}),"Loading tags..."]}),t.size>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(Le.Z,{fullWidth:!0,sx:{minWidth:120},children:[(0,I.jsx)(We.Z,{size:"small",children:"Tag"}),(0,I.jsx)(_e.Z,{size:"small",label:"Tag",value:t.has(i)?i:"",onChange:e=>c(e.target.value),children:Array.from(t.entries()).map((([e,t])=>(0,I.jsx)(Ae.Z,{value:e,children:(0,I.jsxs)(r.Z,{sx:pt.imageTagListItem,children:[e,t&&(0,I.jsx)(Te.Z,{color:"success",fontSize:"small"})]})},e)))})]}),(0,I.jsx)(De.Z,{variant:"outlined",onClick:o,loading:void 0!==s,children:"Pull"}),(0,I.jsx)(De.Z,{variant:"contained",onClick:l,loading:void 0!==s,children:"Run"})]})]}),void 0!==s&&(0,I.jsx)(Be.Z,{variant:"determinate",value:s,sx:{position:"absolute",left:0,bottom:0,width:"100%"}})]}),(0,I.jsxs)(r.Z,{sx:pt.detailCardHeaderSectionWrapper,children:[(0,I.jsx)(a.ExternalLink,{href:e.link,children:"View on Hub"}),(0,I.jsx)(v.Z,{sx:{marginLeft:"auto"},children:`Last pushed ${d}`})]})]})}function jt({item:e,tag:t}){const n=function({organization:e,repository:t,images:n}){const i=n.find((({architecture:e})=>"amd64"===e)),{data:a={status:"USER_SHOULD_SEE_SCAN_PENDING"}}=(0,Ie.a)({queryKey:["image-vulnerabilities-scan",e,t.name,null==i?void 0:i.digest],queryFn:()=>async function(e,t,n){const i=await fetch(`https://dd-docker-hub/api/scan/v1/accounts/${e}/${t.name}`),a=await i.json();if(200===i.status&&!a.scan_enabled)return{status:"USER_SHOULD_ENABLE_SCAN"};if(204===i.status)return"owner"===t.affiliation?{status:"USER_SHOULD_UPGRADE_PLAN"}:{status:"USER_SHOULD_ASK_REPO_OWNER_TO_UPGRADE_PLAN"};if(!n)return{status:"NOT_AMD64_ARCHITECTURE"};const s=await fetch(`https://dd-docker-hub/api/scan/v1/reports/snyk/docker.io/${e}/${t.name}/${n}/newest`);if(s.ok){const{vulnerabilities:e}=await s.json();return{status:"USER_SHOULD_SEE_SCAN_FINISHED",vulnerabilities:e}}return{status:"NO_SCAN_AVAILABLE_YET"}}(e,t,null==i?void 0:i.digest),cacheTime:3e5,staleTime:3e5});return a}({organization:e.organization,repository:e,images:t.images}),i=t.images.find((({architecture:e})=>"amd64"===e)),s=`https://hub.docker.com/layers/${e.organization}/${e.name}/${t.name}/images/${null==i?void 0:i.digest}?context=repo&tab=vulnerabilities`;switch(n.status){case"USER_SHOULD_SEE_SCAN_PENDING":return(0,I.jsx)(be.Z,{size:25});case"USER_SHOULD_SEE_SCAN_FINISHED":return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(gt.q,{...n.vulnerabilities}),(0,I.jsx)(a.ExternalLink,{href:s,sx:{ml:1},children:"View on Hub"})]});default:return(0,I.jsx)(v.Z,{children:"No scan available"})}}var kt=n(5834),bt=n.n(kt),wt=n(58230),vt=n.n(wt),yt=n(44086);const Zt={volumeHeaderWrapper:{gap:1,width:"100%",height:"100%",display:"flex",flexFlow:"wrap"},volumeHeaderName:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},volumeHeaderMetadataWrapper:{width:"100%",display:"flex",justifyContent:"space-between"}};function St({item:e,containers:t,onDelete:n}){var i;const a=(0,Fe.Z)(),{trackGlobalSearchEvent:s}=(0,w.Tm)(w.qR.Screen);return(0,I.jsxs)(r.Z,{sx:Zt.volumeHeaderWrapper,children:[(0,I.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[(0,I.jsx)(bt(),{sx:{fontSize:32,color:(null!==(i=e.nbContainers)&&void 0!==i?i:0)>0?a.palette.status.running:a.palette.status.stopped}}),(0,I.jsx)(R.Z,{title:e.Name,children:(0,I.jsx)(v.Z,{variant:"body1",sx:Zt.volumeHeaderName,children:e.Name})}),(0,I.jsx)(ve.y,{text:e.Name,onClick:()=>{s(w.bk.VolumeNameCopyButtonClicked)},sx:{fontSize:"inherit"}}),(0,I.jsx)(l.Z,{size:"small",color:"error",variant:"contained",onClick:n,sx:{ml:"auto"},children:(0,I.jsx)(at.Z,{})})]}),(0,I.jsxs)(r.Z,{sx:Zt.volumeHeaderMetadataWrapper,children:[(0,I.jsxs)(v.Z,{sx:{fontSize:13,color:t.length>0?a.palette.docker.green[400]:null,display:"flex",alignItems:"center",fontWeight:t.length>0?600:null},children:[(0,I.jsx)(r.Z,{component:"span",sx:{width:8,height:8,marginRight:1,borderRadius:"50%",backgroundColor:t.length>0?a.palette.docker.green[300]:a.palette.docker.grey[300]}}),0===t.length?"Not in use":`In use (${t.length})`]}),(0,I.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},children:["Created"," ",(0,yt.Z)(new Date(e.CreatedAt),{addSuffix:!0}),(0,I.jsx)(r.Z,{component:"span",sx:{mx:1,width:2,height:2,backgroundColor:a.palette.text.secondary}}),vt()(1024*(e.size||0))]})]})]})}const It={tabsWrapper:e=>({borderBottom:`1px solid ${e.palette.docker.grey[100]}`}),bodyWrapper:{gap:2,flex:1,display:"flex",minHeight:0,alignItems:"stretch",marginTop:1},detailCardWrapper:e=>({flex:2,overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",border:"light"===e.palette.mode?`1px solid ${e.palette.docker.grey[100]}`:"1px solid #000000"})},Rt={docs:function({item:e,isActive:t}){const{trackGlobalSearchEvent:n}=(0,w.Tm)(w.qR.Screen);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(D.Z,{direction:"column",sx:{overflow:"hidden"},children:[(0,I.jsx)(S.e,{underline:t,itemName:e.title,sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),(0,I.jsx)(S.e,{underline:t,itemName:e.description||"",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})]}),(0,I.jsxs)(D.Z,{direction:"row",spacing:1,sx:{marginLeft:"auto",alignItems:"center",maxWidth:"50%"},children:[e.keywords&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(V.Z,{sx:{height:16,width:16}}),(0,I.jsx)(S.e,{itemName:e.keywords,underline:t,sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})]}),t&&(0,I.jsx)(l.Z,{sx:{flexShrink:0},endIcon:(0,I.jsx)(H.default,{}),onClick:t=>{t.stopPropagation(),n(w.bk.DocOpened,{doc:e.title}),window.open(e.url,"_blank")},children:"Open"})]})]})},images:function({item:e,isActive:t}){switch(e.type){case"remote-repository":return(0,I.jsx)(ke,{item:e,isActive:t});case"local-image-tag":return(0,I.jsx)(Ce,{item:e,isActive:t});case"hub-image":return(0,I.jsx)(he,{item:e,isActive:t});default:return null}},volumes:function({item:e,isActive:t}){var n;const i=(0,Fe.Z)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(bt(),{sx:{fontSize:32,color:(null!==(n=e.nbContainers)&&void 0!==n?n:0)>0?i.palette.status.running:i.palette.status.stopped}}),(0,I.jsx)(S.e,{underline:t,itemName:e.Name,sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),(0,I.jsx)(v.Z,{variant:"body1",sx:{textAlign:"right",whiteSpace:"nowrap",marginLeft:"auto"},children:vt()(1024*(e.size||0))})]})},extensions:function({item:e,isActive:t}){const n=(0,Y.A)(),i=(0,u.C)(p.Kf.modalIsOpen),a=(0,u.C)(p.Kf.searchQuery),{isPrivate:s}=(0,J.q2)();return(0,q.F)((()=>{i||a!==e.name&&(e.isFeatured||e.isRecommended)&&n(X.v.FeaturedExtensionDisplay,{extension:e,context:"global-search-featured"})})),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(K.I,{name:e.name,icon:e.icon,provider:e.provider,sx:{marginRight:0,height:"24px",width:"24px"}}),(0,I.jsxs)(r.Z,{sx:{width:180,display:"flex",flexDirection:"column",flexShrink:0},children:[(0,I.jsx)(S.e,{underline:t,itemName:e.name,sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),(0,I.jsx)(M.T,{publisher:e.provider,publisherBadge:e.publisherBadge})]}),(0,I.jsx)(v.Z,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:e.description}),(0,I.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",marginLeft:"auto"},children:!s&&e.uniqueInstallsCount?(0,I.jsx)(Q.w,{sx:{color:"inherit"},value:e.uniqueInstallsCount}):null})]})},containersCompose:function({item:e,isActive:t}){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:"container"===e.type?(0,I.jsx)(Z.U,{state:e.state.status}):(0,I.jsx)(y.k,{state:e.state.status})}),(0,I.jsx)(S.e,{underline:t,itemName:e.name,sx:{fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),"container"===e.type&&(0,I.jsx)(S.e,{underline:t,itemName:e.image,sx:{marginLeft:"auto",flexShrink:0}}),"container"!==e.type&&(0,I.jsx)(v.Z,{sx:{marginLeft:"auto",flexShrink:0},children:`${e.containers.length} container${e.containers.length>0?"s":""}`})]})}},Tt={images:function({item:e}){switch(e.type){case"remote-repository":return(0,I.jsx)(ft,{item:e});case"local-image-tag":return(0,I.jsx)(ct,{item:e});case"hub-image":return(0,I.jsx)(it,{item:e});default:return null}},volumes:function({item:e}){const{trackGlobalSearchEvent:t}=(0,w.Tm)(w.qR.Screen),n=(0,u.C)((e=>e.containers.entities)).filter((t=>t.mounts.some((({name:t})=>t===e.Name)))),[a,s]=(0,i.useState)(!1);return(0,I.jsxs)(N,{header:(0,I.jsx)(St,{item:e,containers:n,onDelete:()=>{s(!0),t(w.bk.VolumeRemoveButtonClicked)}}),children:[(0,I.jsx)(B,{containers:n,emptyListText:"No container with this volume.",onContainerOpenBrowserClick:()=>t(w.bk.VolumeContainerOpenBrowserButtonClicked),onContainerPauseClick:()=>t(w.bk.VolumeContainerPauseButtonClicked),onContainerRemoveClick:()=>t(w.bk.VolumeContainerRemoveButtonClicked),onContainerRestartClick:()=>t(w.bk.VolumeContainerRestartButtonClicked),onContainerStartClick:()=>t(w.bk.VolumeContainerStartButtonClicked),onContainerStopClick:()=>t(w.bk.VolumeContainerStopButtonClicked),onContainerTerminalClick:()=>t(w.bk.VolumeContainerTerminalButtonClicked),onContainerViewFilesClick:()=>t(w.bk.VolumeContainerViewFilesButtonClicked),onContainerViewDetailsClick:()=>t(w.bk.VolumeContainerViewDetailsButtonClicked),onContainerGenerateRunClick:()=>t(w.bk.VolumeContainerGenerateRunButtonClicked)}),a&&(0,I.jsx)(st.A,{open:!0,onClose:()=>s(!1),action:()=>desktopIpcClient.volumes.remove(e.Name),itemType:"volume",items:[e.Name],unsafelyUseRawErrorText:!0})]})},extensions:function({item:e}){var t,n;return(0,I.jsxs)(N,{header:(0,I.jsx)(ce,{item:e}),children:[(0,I.jsx)(se.Q,{extension:e}),(0,I.jsx)(L.Z,{sx:{pb:1}}),(0,I.jsxs)(r.Z,{children:[(0,I.jsxs)(r.Z,{mb:2,children:[!e.details.detailedDescription&&(0,I.jsx)(v.Z,{children:"This extension has no description"}),(0,I.jsx)(re.c,{content:null!==(t=e.details.detailedDescription)&&void 0!==t?t:""})]}),e.details.screenshots&&(0,I.jsx)(oe.W,{screenshots:e.details.screenshots}),e.details.additionalUrls&&e.details.additionalUrls.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.Z,{variant:"h4",my:2,children:"Resources"}),(0,I.jsx)(te.Z,{children:null===(n=e.details.additionalUrls)||void 0===n?void 0:n.map((e=>(0,I.jsx)(ne.ZP,{disableGutters:!0,children:(0,I.jsx)(a.ExternalLink,{href:e.url,children:e.title})},e.url)))})]})]})]})},containersCompose:function({item:e}){return"container"===e.type?(0,I.jsx)(z,{item:e}):(0,I.jsx)(_,{item:e})}};function Et(){const e=(0,g.a)(),t=(0,x.K)(),{trackGlobalSearchEvent:n}=(0,w.Tm)(w.qR.Screen),v=(0,m.T)(),y=(0,u.C)(p.Kf.modalIsOpen),Z=(0,u.C)(p.Kf.searchResultsType),S=(0,u.C)(p.Kf.activeFilters),R=(0,u.C)(p.Kf.searchQuery),T=(0,u.C)(p.Kf.shouldShowSignInPrompt),E=(0,b.Q)(),{items:D,status:N,loadMoreItems:L}=E[Z],W=t.get("focusedIndex"),{focusedIndex:B,resetFocus:A,focusItem:_,focusNextItem:F,focusPreviousItem:O}=(0,k.k)(D,null!==W?parseInt(W,10):0,!!L);(0,i.useEffect)((()=>{v(p.u3.closeModal())}),[v,W]),(0,i.useEffect)((()=>{A()}),[R,Z,A]),(0,i.useEffect)((()=>{null!==W&&_(parseInt(W,10))}),[W,_]),(0,i.useEffect)((()=>{const e=e=>{y||("ArrowUp"===e.key&&(O(),n(w.bk.SearchResultUpArrowKeyPressed),e.preventDefault()),"ArrowDown"===e.key&&(F(),n(w.bk.SearchResultDownArrowKeyPressed),e.preventDefault()))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[y,D.length,F,O,n]),(0,i.useEffect)((()=>{y||0!==R.length||e(-1)}),[e,y,R]);const $=D[B],P=Rt[Z],G=Tt[Z];return(0,I.jsx)(d.A,{title:"Global Search",children:(0,I.jsxs)(h.cv,{children:[(0,I.jsxs)(h.CI,{children:["Search results for “",R,"”"]}),(0,I.jsxs)(h.fK,{children:[(0,I.jsx)(r.Z,{sx:It.tabsWrapper,children:(0,I.jsxs)(c.Z,{value:Z,onChange:(e,t)=>(e=>{switch(v(p.u3.setSearchResultsType(e)),e){case"containersCompose":n(w.bk.ContainersComposeTabClicked);break;case"images":n(w.bk.ImagesTabClicked);break;case"volumes":n(w.bk.VolumesTabClicked);break;case"extensions":n(w.bk.ExtensionsTabClicked);break;case"docs":n(w.bk.DocsTabClicked)}})(t),children:[(0,I.jsx)(o.Z,{value:"images",label:`Images (${E.images.count})`}),(0,I.jsx)(o.Z,{value:"containersCompose",label:`Containers (${E.containersCompose.count})`}),(0,I.jsx)(o.Z,{value:"volumes",label:`Volumes (${E.volumes.count})`}),(0,I.jsx)(o.Z,{value:"extensions",label:`Extensions (${E.extensions.count})`}),(0,I.jsx)(o.Z,{value:"docs",label:`Docs (${E.docs.count})`})]})}),(0,I.jsx)(f.x,{analyticsContext:w.qR.Screen}),T&&(0,I.jsx)(j.J,{analyticsContext:w.qR.Screen}),(0,I.jsxs)(r.Z,{sx:It.bodyWrapper,children:[(0,I.jsx)(C.h,{sx:{flex:1},items:D,focusedItemIndex:B,isLoadingMoreItems:"loading-more"===N,loadMoreItems:L,EmptyState:T&&1===S.size?null:(0,I.jsx)(a.EmptyState,{title:"No results found",content:"Change your search term and try again.",icon:s.default,sx:{width:"100%"},actions:(0,I.jsx)(l.Z,{variant:"contained",onClick:()=>{v(p.u3.openModal()),v(p.u3.setSearchQuery(""))},children:"Clear search"})}),onItemClick:(e,t)=>{_(t),n(w.bk.SearchResultClicked)},onItemRender:(e,t)=>(0,I.jsx)(P,{item:e,isActive:B===t})}),$&&G&&(0,I.jsx)(r.Z,{sx:It.detailCardWrapper,children:(0,I.jsx)(G,{item:$})})]})]})]})})}},68740:()=>{}}]);
//# sourceMappingURL=sourcemaps/2667.bundle.js.map